(function(e){function t(t){for(var r,s,c=t[0],o=t[1],u=t[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,c=1;c<n.length;c++){var o=n[c];0!==a[o]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"007d":function(e,t,n){},"19ab":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header"),n("div",{staticClass:"container"},[n("router-view")],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",[n("div",{staticClass:"nav-wrapper"},[n("a",{staticClass:"brand-logo left",attrs:{onclick:"(() => window.location.href='/recipees')()"}},[e._v("Home")]),n("ul",{staticClass:"right",attrs:{id:"nav-mobile"}},[n("li",[n("router-link",{staticClass:"waves-effect waves-light btn",attrs:{to:"/recipee/create"}},[e._v("Create recipee")])],1)])])])},c=[],o={},u=o,l=(n("f9a7"),n("2877")),d=Object(l["a"])(u,s,c,!1,null,"38ecdd66",null),p=d.exports,f={name:"App",components:{Header:p}},m=f,v=Object(l["a"])(m,a,i,!1,null,null,null),h=v.exports,g=n("8c4f"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("nav",{attrs:{id:"searchbar"}},[n("div",{staticClass:"nav-wrapper"},[n("form",[n("div",{staticClass:"input-field"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchInput,expression:"searchInput"}],attrs:{id:"search",placeholder:"Search by name or ingridient",type:"search"},domProps:{value:e.searchInput},on:{keyup:e.search,input:function(t){t.target.composing||(e.searchInput=t.target.value)}}}),e._m(0),n("i",{staticClass:"material-icons"},[e._v("close")])])])])]),e.recipeesList.length>0?n("div",{staticClass:"list"},e._l(e.recipeesList,(function(t){return n("RecipeeCard",{key:t.id,staticClass:"list-item",attrs:{name:t.name,description:t.description,ingridients:t.ingridients,id:t._id,path:t.image},on:{refetch:e.fetchNewPage}})})),1):n("div",{attrs:{id:"no-data"}},[e._v("No recipees available")]),n("Pagination",{attrs:{pagesCount:e.meta.totalPages,currentPage:e.meta.currentPage},on:{fetchNew:e.fetchNewPage}})],1)},w=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{staticClass:"label-icon",attrs:{for:"search"}},[n("i",{staticClass:"material-icons"},[e._v("search")])])}],_=n("1da1"),y=(n("b0c0"),n("b64b"),n("ac1f"),n("5319"),n("96cf"),n("d4ec")),C=n("bee2"),k=n("d5e4"),x=(n("99af"),n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("bc3a")),R=n.n(x),j="http://localhost:3000/api",O=new WeakMap,P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j;Object(y["a"])(this,e),Object(k["a"])(this,O,{writable:!0,value:{"Content-Type":"application/json",Accept:"application/json"}}),this.baseUrl=t}return Object(C["a"])(e,[{key:"getAllRecipees",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:1,n=i.length>1?i[1]:void 0,console.log(n),!n){e.next=8;break}return e.next=6,R.a.get("".concat(this.baseUrl,"/recipees?page=").concat(t,"&name=").concat(n,"&ingridients=").concat(n),this.headers);case 6:return r=e.sent,e.abrupt("return",r.data);case 8:return e.next=10,R.a.get("".concat(this.baseUrl,"/recipees?page=").concat(t),this.headers);case 10:return a=e.sent,e.abrupt("return",a.data);case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSingleRecipee",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.a.get("".concat(this.baseUrl,"/recipees/").concat(t),this.headers);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createRecipee",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.a.post("".concat(this.baseUrl,"/recipees"),t,{"Content-Type":"multipart/form-data",Accept:"application/json"});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateRecipee",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.a.put("".concat(this.baseUrl,"/recipees/").concat(a),{description:t,name:n,ingridients:r},this.headers);case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"deleteRecipee",value:function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.a.delete("".concat(this.baseUrl,"/recipees/").concat(t),{},this.headers);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card blue-grey darken-1",attrs:{id:"card-wrapper"}},[n("div",{attrs:{id:"test"}},[n("router-link",{staticClass:"waves-effect waves-light btn-small actions",attrs:{to:{name:"RecipeeEditForm",params:{id:e.id}}}},[n("i",{staticClass:"material-icons"},[e._v("mode_edit")])]),n("button",{staticClass:"waves-effect #d32f2f red darken-2 btn-small actions",on:{click:function(t){return e.removeRecipee(e.id)}}},[n("i",{staticClass:"material-icons"},[e._v("delete")])])],1),n("div",{staticClass:"card-image"},[n("img",{attrs:{alt:"img",src:e.path?e.baseUrl+"/image?path="+e.path:e.image}})]),n("div",{staticClass:"card-content white-text"},[n("span",{staticClass:"card-title"},[e._v(e._s(e.name))]),n("p",[e._v(e._s(e.shortDescription))])]),n("div",{staticClass:"liner"}),n("div",{attrs:{id:"ingridients-wrapper"}},e._l(e.ingridients,(function(t){return n("span",{key:t,staticClass:"ingridients"},[e._v(e._s(t))])})),0),n("div",{staticClass:"card-action"},[n("router-link",{staticClass:"waves-effect waves-light btn-small",attrs:{to:{name:"ReadMore",params:{id:e.id}},id:"read-more-button"}},[e._v("Read More")])],1)])},L=[],S=(n("a4d3"),n("e01a"),n("f23a")),$={name:"RecipeeCard",props:["name","description","ingridients","id","path"],data:function(){return{image:S,baseUrl:j}},methods:{removeRecipee:function(e){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!confirm("Are you sure?")){n.next=12;break}return r=new P,n.prev=2,n.next=5,r.deleteRecipee(e);case 5:n.sent,t.$emit("refetch"),n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](2),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})))()}},computed:{shortDescription:function(){var e;return this.description&&this.description.length>80?this.description.substring(0,80)+"...":null!==(e=this.description)&&void 0!==e?e:null}}},I=$,M=(n("6636"),Object(l["a"])(I,E,L,!1,null,"3625a763",null)),F=M.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"pagination"},e._l(e.pagesCount,(function(t){return n("li",{key:t,class:t==e.currentPage?"active":"waves-effect"},[n("a",{on:{click:function(n){return e.$emit("fetchNew",t)}}},[e._v(e._s(t))])])})),0)},A=[],U={props:["pagesCount","currentPage"]},T=U,D=(n("7470"),Object(l["a"])(T,N,A,!1,null,"587565a8",null)),H=D.exports,q=n("2ef0"),J=n.n(q),Q={components:{RecipeeCard:F,Pagination:H},data:function(){return{recipeesList:[],meta:[],searchInput:null}},methods:{fetchNewPage:function(){var e=arguments,t=this;return Object(_["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.length>0&&void 0!==e[0]?e[0]:t.meta.currentPage,a=new P;try{a.getAllRecipees(r,t.searchInput).then((function(e){t.recipeesList=e.data,t.meta=e.meta,t.updateQuery(r,t.searchInput)}))}catch(i){console.log(i)}case 3:case"end":return n.stop()}}),n)})))()},search:J.a.debounce(function(){var e=Object(_["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.fetchNewPage(1);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),1500),updateQuery:function(e,t){var n={};t&&""!==t&&(n.name=t,n.ingridients=t),1!==e&&(n.page=e),n=0!==Object.keys(n).length?n:null,this.$router.replace({path:"/recipees",query:n})}},mounted:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.$route.query.page,r=e.$route.query.name,e.searchInput=r,e.fetchNewPage(n);case 4:case"end":return t.stop()}}),t)})))()}},z=Q,W=(n("5857"),Object(l["a"])(z,b,w,!1,null,null,null)),B=W.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[e.alertSuccess?n("div",{staticClass:"alert",domProps:{textContent:e._s(e.editMode?"Recipe successfully updated":"New recipee successfully created!")}},[n("span",{staticClass:"closebtn",on:{click:e.closeAlert}},[e._v("×")])]):e._e(),e.alertErrors.length>0?n("div",{staticClass:"alert-errors"},[n("span",{staticClass:"closebtn",on:{click:e.closeErrorAlert}},[e._v("×")]),e._l(e.alertErrors,(function(t){return n("p",{key:t},[e._v("- "+e._s(t))])}))],2):e._e(),n("form",{staticClass:"col s12 red lighten-5",on:{submit:function(e){e.preventDefault()}}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col s12"},[n("label",{staticClass:"active",attrs:{for:"name"}},[e._v("Title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"validate",attrs:{id:"name",type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),n("div",{staticClass:"col s12"},[n("label",{staticClass:"active",attrs:{for:"description"}},[e._v("Description")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"materialize-textarea active",attrs:{rows:"4",cols:"50",id:"description",name:"description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})])]),n("div",{staticClass:"row"},[n("div",{staticClass:"input-field col s6"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.ingridient,expression:"ingridient"}],attrs:{id:"ingridient",type:"text"},domProps:{value:e.ingridient},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addIngridient.apply(null,arguments)},input:function(t){t.target.composing||(e.ingridient=t.target.value)}}}),n("label",{attrs:{for:"ingridient"}},[e._v("Enter ingridient")])]),n("div",{staticClass:"input-field col s6"},[n("a",{staticClass:"waves-effect waves-light btn-small",on:{click:e.addIngridient}},[e._v("Add ingridient")])])]),n("div",{staticClass:"row"},e._l(e.ingridientsList,(function(t){return n("div",{key:t,staticClass:"chip",attrs:{title:"click to remove"},on:{click:function(n){return e.removeFromList(t)}}},[e._v(e._s(t))])})),0),n("div",{staticClass:"liner"}),e.editMode?e._e():n("div",{attrs:{id:"image-select"}},[e.image?n("div",[n("img",{attrs:{src:e.image}}),n("button",{on:{click:e.removeImage}},[e._v("Remove image")])]):n("div",[n("h6",[e._v("Select an image")]),n("input",{attrs:{type:"file"},on:{change:e.onFileChange}})])]),1==e.editMode?n("input",{staticClass:"waves-effect waves-light #ff9800 orange btn",attrs:{type:"submit",value:"Submit changes"},on:{click:e.onSubmit}}):n("input",{staticClass:"waves-effect waves-light btn",attrs:{type:"submit",value:"Create"},on:{click:e.onSubmit}})])])},K=[],V=(n("caad"),n("2532"),n("4de4"),n("e9c4"),{data:function(){return{name:"",description:"",ingridient:"",ingridientsList:[],editMode:!1,alertSuccess:!1,alertErrors:[],image:"",imageFile:""}},methods:{addIngridient:function(){this.ingridientsList.includes(this.ingridient)?alert("ingridient already added"):(this.ingridientsList.push(this.ingridient),this.ingridient="")},removeFromList:function(e){var t=this.ingridientsList.filter((function(t){return t!==e}));this.ingridientsList=t},onSubmit:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.editMode){t.next=22;break}return n=new P,t.prev=2,r=new FormData,r.append("image",e.imageFile),r.append("name",e.name),r.append("description",e.description),r.append("ingridients",JSON.stringify(e.ingridientsList)),t.next=10,n.createRecipee(r);case 10:e.alertSuccess=!0,e.alertErrors=!1,e.name="",e.description="",e.ingridientsList=[],t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](2),e.alertErrors=t.t0.response.data.data.errors;case 20:t.next=33;break;case 22:return a=new P,t.prev=23,t.next=26,a.updateRecipee(e.description,e.name,e.ingridientsList,e.$route.params.id);case 26:e.alertSuccess=!0,e.alertErrors=!1,t.next=33;break;case 30:t.prev=30,t.t1=t["catch"](23),e.alertErrors=t.t1.response.data.data.errors;case 33:case"end":return t.stop()}}),t,null,[[2,17],[23,30]])})))()},closeAlert:function(){this.alertSuccess=!1},closeErrorAlert:function(){this.alertErrors=[]},onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&(this.imageFile=e.target.files[0],this.createImage(t[0]))},createImage:function(e){new Image;var t=new FileReader,n=this;t.onload=function(e){n.image=e.target.result},t.readAsDataURL(e)},removeImage:function(e){this.image=""}},mounted:function(){var e=this,t=this.$route.params.id;if(t){this.editMode=!0;var n=new P;try{n.getSingleRecipee(t).then((function(t){e.name=t.data.name,e.description=t.data.description,e.ingridientsList=t.data.ingridients}))}catch(r){console.log(r.response.data)}}}}),X=V,Y=(n("991f"),Object(l["a"])(X,G,K,!1,null,"9108fd40",null)),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("RecipeeForm")},te=[],ne={components:{RecipeeForm:Z}},re=ne,ae=Object(l["a"])(re,ee,te,!1,null,null,null),ie=ae.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v(e._s(e.name))]),e.path?n("img",{staticClass:"responsive-img",attrs:{src:e.baseUrl+"/image?path="+e.path}}):e._e(),n("p",[e._v(e._s(e.description))]),n("div",{staticClass:"row"},e._l(e.ingridientsList,(function(t){return n("div",{key:t,staticClass:"chip"},[e._v(e._s(t))])})),0)])},ce=[],oe=new P,ue={data:function(){return{name:"",description:"",ingridientsList:[],path:"",baseUrl:j}},mounted:function(){var e=this,t=this.$route.params.id;if(t){this.editMode=!0;try{oe.getSingleRecipee(t).then((function(t){e.name=t.data.name,e.description=t.data.description,e.ingridientsList=t.data.ingridients,e.path=t.data.image}))}catch(n){console.log(n.response.data)}}}},le=ue,de=Object(l["a"])(le,se,ce,!1,null,"89e7fab6",null),pe=de.exports;r["a"].use(g["a"]);var fe=new g["a"]({routes:[{path:"/",redirect:function(e){return{path:"/recipees"}}},{path:"/recipees",name:"Home",component:B},{path:"/recipee/create",name:"RecipeeForm",component:Z},{path:"/recipee/:id",name:"ReadMore",component:pe},{path:"/recipee/:id/edit",name:"RecipeeEditForm",component:ie}],mode:"history"});r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(h)},router:fe}).$mount("#app")},5857:function(e,t,n){"use strict";n("7d72")},6636:function(e,t,n){"use strict";n("9f7d")},7470:function(e,t,n){"use strict";n("007d")},"7d72":function(e,t,n){},"991f":function(e,t,n){"use strict";n("19ab")},"9f7d":function(e,t,n){},d1bc:function(e,t,n){},f23a:function(e,t,n){e.exports=n.p+"img/no-image1.80b0d06c.jpg"},f9a7:function(e,t,n){"use strict";n("d1bc")}});
//# sourceMappingURL=app.77aa3168.js.map